{% extends "index.html" %}
{% block content %}
<div class="music-container">
    <div class="music-header">
        <h1>Müzik</h1>
        <div class="add-music">
            <select id="musicThemeSelect" class="theme-select">
                <option value="light">Açık Tema</option>
                <option value="dark">Koyu Tema</option>
            </select>
            <button id="addYoutubeBtn" class="btn-primary">
                <i class="fab fa-youtube"></i> YouTube'dan Ekle
            </button>
        </div>
    </div>

    <div class="music-player">
        <div class="now-playing">
            <div class="video-container">
                <div id="youtubePlayer"></div>
            </div>
            <div class="track-info">
                <h2 id="trackTitle">Şarkı seçilmedi</h2>
                <p id="artistName">Sanatçı</p>
                <div class="track-stats">
                    <span id="viewCount"><i class="fas fa-eye"></i> 0</span>
                    <span id="likeCount"><i class="fas fa-heart"></i> 0</span>
                </div>
            </div>
        </div>

        <div class="player-controls">
            <div class="progress-container">
                <div class="time-info">
                    <span id="currentTime">0:00</span>
                    <span id="totalTime">0:00</span>
                </div>
                <div class="progress-bar">
                    <div class="progress"></div>
                </div>
            </div>

            <div class="control-buttons">
                <button id="prevBtn" class="control-btn" title="Önceki"><i class="fas fa-backward"></i></button>
                <button id="playBtn" class="control-btn control-btn-large" title="Oynat/Duraklat">
                    <i class="fas fa-play"></i>
                </button>
                <button id="nextBtn" class="control-btn" title="Sonraki"><i class="fas fa-forward"></i></button>
                <button id="shuffleBtn" class="control-btn" title="Karıştır"><i class="fas fa-random"></i></button>
                <button id="repeatBtn" class="control-btn" title="Tekrarla"><i class="fas fa-redo"></i></button>
            </div>

            <div class="volume-control">
                <i class="fas fa-volume-up"></i>
                <div class="volume-slider-container">
                    <input type="range" id="volumeSlider" min="0" max="100" value="100">
                    <div class="volume-tooltip">100%</div>
                </div>
            </div>
        </div>
    </div>

    <div class="playlist-section">
        <div class="playlist-header">
            <div class="playlist-title">
                <h3>Çalma Listesi</h3>
                <span id="playlistCount">0 şarkı</span>
            </div>
            <div class="playlist-controls">
                <div class="search-container">
                    <i class="fas fa-search"></i>
                    <input type="text" id="searchMusic" placeholder="Şarkı veya sanatçı ara...">
                </div>
                <div class="playlist-sort">
                    <select id="sortPlaylist">
                        <option value="date-desc">Yeniden Eskiye</option>
                        <option value="date-asc">Eskiden Yeniye</option>
                        <option value="name-asc">İsme Göre (A-Z)</option>
                        <option value="name-desc">İsme Göre (Z-A)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="playlist" id="playlist">
            <!-- Şarkılar JavaScript ile eklenecek -->
        </div>
    </div>
</div>

<!-- YouTube Link Ekleme Modalı -->
<div id="youtubeModal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <h3>YouTube Video Ekle</h3>
            <button class="modal-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-body">
            <div class="youtube-input">
                <input type="text" id="youtubeUrl" placeholder="YouTube video URL'sini yapıştırın">
                <button id="checkVideo" class="btn-primary">Kontrol Et</button>
            </div>
            <div id="videoPreview" class="video-preview">
                <img id="thumbnailPreview" src="" alt="Video önizleme">
                <div class="video-info">
                    <h4 id="videoTitle"></h4>
                    <p id="channelTitle"></p>
                    <p id="videoDuration"></p>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button id="addToPlaylist" class="btn-primary" disabled>Listeye Ekle</button>
        </div>
    </div>
</div>

<!-- Mini Player -->
<div id="miniPlayer" class="mini-player">
    <div class="mini-track-info">
        <img id="miniThumbnail" src="" alt="Video thumbnail">
        <div class="mini-text">
            <span id="miniTrackTitle">Şarkı seçilmedi</span>
            <span id="miniArtistName">Sanatçı</span>
        </div>
    </div>
    <div class="mini-controls">
        <button id="miniPlayBtn"><i class="fas fa-play"></i></button>
        <button id="miniNextBtn"><i class="fas fa-forward"></i></button>
    </div>
</div>

{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/music.css') }}">
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/music.js') }}"></script>
{% endblock %}